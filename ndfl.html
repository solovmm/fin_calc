<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Калькулятор НДФЛ</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Icon set (inline SVG, single style) -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <symbol id="i-home" viewBox="0 0 24 24">
      <path d="M4 10.5 12 4l8 6.5V20a1 1 0 0 1-1 1h-5v-6H10v6H5a1 1 0 0 1-1-1z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
    </symbol>
    <symbol id="i-help" viewBox="0 0 24 24">
      <path d="M12 18h.01" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M9.2 9a3 3 0 1 1 4.6 2.6c-.9.55-1.3 1-1.3 2.4" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M12 22a10 10 0 1 0-10-10 10 10 0 0 0 12 22z" fill="none" stroke="currentColor" stroke-width="1.2"/>
    </symbol>
    <symbol id="i-copy" viewBox="0 0 24 24">
      <path d="M9 9h10v12H9z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M5 15H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v1" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-money" viewBox="0 0 24 24">
      <path d="M3 7h18v10H3z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M7 12a5 5 0 0 0 10 0" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
      <path d="M6 9h.01M18 15h.01" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-calendar" viewBox="0 0 24 24">
      <path d="M7 3v3M17 3v3" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M4 7h16v14H4z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M4 11h16" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-swap" viewBox="0 0 24 24">
      <path d="M7 7h14l-3-3M17 17H3l3 3" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
    </symbol>
    <symbol id="i-list" viewBox="0 0 24 24">
      <path d="M8 6h13M8 12h13M8 18h13" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M4 6h.01M4 12h.01M4 18h.01" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-calc" viewBox="0 0 24 24">
      <path d="M6 3h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M7 7h10" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
      <path d="M8 11h.01M12 11h.01M16 11h.01M8 15h.01M12 15h.01M16 15h.01M8 19h.01M12 19h.01M16 19h.01" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
    </symbol>
  </svg>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo">%</div>
        <div class="title">
          <h1>Калькулятор НДФЛ</h1>
          <p>Расчёт налога и суммы «на руки» по виду дохода</p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="index.html"><svg class="ico"><use href="#i-home"></use></svg>Главная</a>
        <button class="btn" id="helpOpen"><svg class="ico"><use href="#i-help"></use></svg>Справка</button>
        <button class="btn" id="copyBtn">Копировать результат</button>
      </div>
    </div>

    <div class="tabs">
      <a class="tab" href="inflation.html"><svg class="ico"><use href="#i-money"></use></svg>Инфляция</a>
      <a class="tab active" href="ndfl.html"><svg class="ico"><use href="#i-calc"></use></svg>НДФЛ</a>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Параметры</h2>

        <div class="field">
          <label><span class="labelrow"><svg class="ico"><use href="#i-list"></use></svg>Вид дохода</span>
            <span class="help" data-help="h_type">?</span>
            <span class="popover" id="h_type">Выберите тип дохода. Для «Ставка вручную» калькулятор применит единую ставку без прогрессии.</span>
          </label>
          <select id="incomeType">
            <option value="salary">Заработная плата</option>
            <option value="svo">Выплаты, связанные с СВО</option>
            <option value="property_sale">Доход с продажи имущества</option>
            <option value="rent">Доход с аренды</option>
            <option value="securities">Доход по операциям с ценными бумагами</option>
            <option value="dividends">Дивиденды</option>
            <option value="deposits">Проценты по вкладам</option>
            <option value="prize">Приз / выигрыш</option>
            <option value="prize_ad">Приз / выигрыш (рекламный)</option>
            <option value="manual">Указать ставку вручную</option>
          </select>
        </div>

        <div class="row">
          <div class="field">
            <label><span class="labelrow"><svg class="ico"><use href="#i-money"></use></svg>Доход</span>
              <span class="help" data-help="h_income">?</span>
              <span class="popover" id="h_income">Введите сумму дохода (обычно за год). Можно указать сумму «до налога» или «после налога».</span>
            </label>
            <div class="money">
              <span>₽</span>
              <input id="income" inputmode="numeric" placeholder="0" value="0"/>
            </div>
            <div class="switches" style="margin-top:10px">
              <label class="pill"><input type="radio" name="mode" value="gross" checked> до вычета налога</label>
              <label class="pill"><input type="radio" name="mode" value="net"> после вычета налога</label>
            </div>
          </div>

          <div class="field">
            <label><span class="labelrow"><svg class="ico"><use href="#i-money"></use></svg>Налоговый вычет</span>
              <span class="help" data-help="h_ded">?</span>
              <span class="popover" id="h_ded">Укажите сумму вычета (если есть). Если вычет не нужен, оставьте 0.</span>
            </label>
            <div class="money">
              <span>₽</span>
              <input id="deduction" inputmode="numeric" placeholder="0" value="0"/>
            </div>
            <div class="smallnote" id="dedHint" style="margin-top:8px"></div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label><span class="labelrow"><svg class="ico"><use href="#i-list"></use></svg>Статус</span>
              <span class="help" data-help="h_res">?</span>
              <span class="popover" id="h_res">Если вы нерезидент, ставка может отличаться. Некоторые категории нерезидентов облагаются как резиденты.</span>
            </label>
            <div class="switches">
              <label class="pill"><input type="checkbox" id="isNonResident"> налогоплательщик нерезидент</label>
              <label class="pill"><input type="checkbox" id="nonResidentAsResident" disabled> нерезидент, но ставка как у резидента</label>
            </div>
          </div>

          <div class="field" id="manualRateWrap" style="display:none">
            <label><span class="labelrow"><svg class="ico"><use href="#i-calc"></use></svg>Ставка вручную</span>
              <span class="help" data-help="h_rate">?</span>
              <span class="popover" id="h_rate">Единая ставка для расчёта (без прогрессии). Например: 13.</span>
            </label>
            <div class="money">
              <span>%</span>
              <input id="manualRate" inputmode="decimal" placeholder="13" value="13"/>
            </div>
          </div>
        </div>

        <div class="field" id="northWrap">
          <label><span class="labelrow"><svg class="ico"><use href="#i-calendar"></use></svg>Районный коэффициент и северная надбавка</span>
            <span class="help" data-help="h_north">?</span>
            <span class="popover" id="h_north">Включите, если в доходе есть районный коэффициент и/или северная надбавка. Доход указывайте без этих надбавок.</span>
          </label>

          <div class="switches" style="margin-bottom:10px">
            <label class="pill"><input type="checkbox" id="hasNorth"> есть РК и/или северная надбавка</label>
          </div>

          <div class="row" id="northFields" style="display:none">
            <div class="field">
              <label>Районный коэффициент</label>
              <div class="money">
                <span>x</span>
                <input id="rkCoef" inputmode="decimal" placeholder="1.0" value="1.0"/>
              </div>
            </div>
            <div class="field">
              <label>Северная надбавка</label>
              <div class="money">
                <span>%</span>
                <input id="northPct" inputmode="decimal" placeholder="0" value="0"/>
              </div>
            </div>
          </div>
        </div>

        <button class="primary" id="calcBtn"><svg class="ico"><use href="#i-calc"></use></svg>Рассчитать</button>
        <div class="status" id="status">Введите параметры и нажмите «Рассчитать».</div>
      </div>

      <div class="card">
        <h2>Результат</h2>
        <p class="sub" id="summary">—</p>

        <div class="big" id="netValue">—</div>

        <div class="kpis">
          <div class="kpi">
            <div class="t">НДФЛ</div>
            <div class="v" id="taxValue">—</div>
          </div>
          <div class="kpi">
            <div class="t">Сумма до налога</div>
            <div class="v" id="grossValue">—</div>
          </div>
          <div class="kpi">
            <div class="t">Усреднённая ставка</div>
            <div class="v" id="avgRateValue">—</div>
          </div>
        </div>

        <details class="details" style="margin-top:14px">
          <summary>Детали расчёта</summary>
          <div class="detailbox" id="detailsBox" style="margin-top:10px;color:var(--muted);line-height:1.5">
            —
          </div>
        </details>
      </div>
    </div>
  </div>

  <div class="modal" id="helpModal">
    <div class="box">
      <h3>Как пользоваться</h3>
      <p>1) Выберите <b>вид дохода</b>.</p>
      <p>2) Введите <b>сумму дохода</b> и отметьте: «до налога» или «после налога».</p>
      <p>3) Если есть <b>вычеты</b>, укажите сумму.</p>
      <p>4) Нажмите <b>Рассчитать</b>.</p>
      <p class="smallnote">Примечание: калькулятор предназначен для ориентировочных оценок и не заменяет консультацию бухгалтера/налогового специалиста.</p>
      <button class="btn close" id="helpClose">Закрыть</button>
    </div>
  </div>

  <script src="ndfl.js"></script>
</body>
</html>
