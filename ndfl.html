<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Калькулятор НДФЛ</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Icon set (inline SVG, single style) -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <symbol id="i-home" viewBox="0 0 24 24">
      <path d="M4 10.5 12 4l8 6.5V20a1 1 0 0 1-1 1h-5v-6H10v6H5a1 1 0 0 1-1-1z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
    </symbol>
    <symbol id="i-help" viewBox="0 0 24 24">
      <path d="M12 18h.01" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M9.2 9a3 3 0 1 1 4.6 2.6c-.9.55-1.3 1-1.3 2.4" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M12 22a10 10 0 1 0-10-10 10 10 0 0 0 12 22z" fill="none" stroke="currentColor" stroke-width="1.2"/>
    </symbol>
    <symbol id="i-copy" viewBox="0 0 24 24">
      <path d="M9 9h10v12H9z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M5 15H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v1" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-money" viewBox="0 0 24 24">
      <path d="M3 7h18v10H3z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M7 12a5 5 0 0 0 10 0" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
      <path d="M6 9h.01M18 15h.01" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-calc" viewBox="0 0 24 24">
      <path d="M6 3h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
      <path d="M7 7h10" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
      <path d="M8 11h.01M12 11h.01M16 11h.01M8 15h.01M12 15h.01M16 15h.01M8 19h.01M12 19h.01M16 19h.01" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
    </symbol>
    <symbol id="i-percent" viewBox="0 0 24 24">
      <path d="M19 5 5 19" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <path d="M7.5 8.5a2.5 2.5 0 1 0 0-.01" fill="none" stroke="currentColor" stroke-width="1.6"/>
      <path d="M16.5 17.5a2.5 2.5 0 1 0 0-.01" fill="none" stroke="currentColor" stroke-width="1.6"/>
    </symbol>
  </svg>

  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo">%</div>
        <div class="title">
          <h1>Калькулятор НДФЛ</h1>
          <p>Считает НДФЛ, сумму на руки и усреднённую ставку</p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="index.html"><svg class="ico"><use href="#i-home"></use></svg>Главная</a>
        <button class="btn" id="helpOpen"><svg class="ico"><use href="#i-help"></use></svg>Справка</button>
        <button class="btn" id="copyBtn"><svg class="ico"><use href="#i-copy"></use></svg>Копировать</button>
      </div>
    </div>

    <div class="tabs">
      <a class="tab" href="inflation.html"><svg class="ico"><use href="#i-money"></use></svg>Инфляция</a>
      <a class="tab active" href="ndfl.html"><svg class="ico"><use href="#i-calc"></use></svg>НДФЛ</a>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Параметры</h2>

        <div class="field">
          <label>Вид дохода <span class="help" data-help="Тип дохода влияет на ставку (например, призы могут облагаться по повышенной ставке).">?</span></label>
          <select id="incomeType">
            <option value="salary">Заработная плата (обычно)</option>
            <option value="dividends">Дивиденды</option>
            <option value="prize">Призы и выигрыши</option>
            <option value="deposits">Проценты по вкладам</option>
            <option value="other">Прочие доходы</option>
            <option value="manual">Своя ставка (вручную)</option>
          </select>
        </div>

        <div class="row" style="margin-top:12px">
          <div class="field">
            <label>Сумма <span class="help" data-help="Введите сумму дохода. Можно писать без пробелов, мы отформатируем.">?</span></label>
            <div class="money"><span>₽</span><input id="income" inputmode="numeric" value="0" placeholder="0"/></div>
          </div>

          <div class="field">
            <label>Сумма указана как <span class="help" data-help="Выберите, что вы вводите: сумму до удержания налога или сумму, которую хотите получить на руки.">?</span></label>
            <div class="seg" role="tablist" aria-label="Режим суммы">
              <input type="radio" id="m_gross" name="mode" value="gross" checked>
              <label for="m_gross">до налога</label>
              <input type="radio" id="m_net" name="mode" value="net">
              <label for="m_net">на руки</label>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <div class="field">
            <label>Налоговый вычет (если есть) <span class="help" data-help="Вычет уменьшает налогооблагаемую базу. Если вычетов нет, оставьте 0.">?</span></label>
            <div class="money"><span>₽</span><input id="deduction" inputmode="numeric" value="0" placeholder="0"/></div>
            <div class="smallnote" id="dedHint"></div>
          </div>

          <div class="field">
            <label>Статус <span class="help" data-help="Для нерезидентов часто применяется ставка 30%, но бывают исключения.">?</span></label>
            <select id="taxStatus">
              <option value="resident">Налогоплательщик резидент</option>
              <option value="nonresident">Нерезидент, ставка 30%</option>
              <option value="nonresident_resident_rate">Нерезидент, ставка как у резидента</option>
            </select>
          </div>
        </div>

        <details class="details" style="margin-top:12px">
          <summary>Дополнительные параметры</summary>
          <div style="margin-top:10px" class="row">
            <div class="field" id="manualRateWrap" style="display:none">
              <label>Своя ставка, % <span class="help" data-help="Используется только в режиме «Своя ставка».">?</span></label>
              <input id="manualRate" inputmode="decimal" value="13" />
            </div>
            <div class="field">
              <label>Опции для РК и северной надбавки <span class="help" data-help="Оставьте выключенным, если это не ваш случай. Формула в прототипе упрощена.">?</span></label>
              <div class="chk">
                <label class="check">
                  <input type="checkbox" id="hasNorth">
                  <span class="box"></span>
                  <span>учитывать РК и надбавку</span>
                </label>
              </div>
            </div>
          </div>

          <div id="northFields" class="row" style="margin-top:10px; display:none;">
            <div class="field">
              <label>Районный коэффициент <span class="help" data-help="Например 1.2. Если не знаете, оставьте 1.0.">?</span></label>
              <input id="rkCoef" inputmode="decimal" value="1.0" />
            </div>
            <div class="field">
              <label>Северная надбавка, % <span class="help" data-help="Например 30. Если нет, оставьте 0.">?</span></label>
              <input id="northPct" inputmode="decimal" value="0" />
            </div>
          </div>
        </details>

        <div class="cta">
          <button class="btn primary" id="calcBtn"><svg class="ico"><use href="#i-percent"></use></svg>Рассчитать</button>
        </div>

        <div class="status" id="status">Введите параметры и нажмите «Рассчитать».</div>
      </div>

      <div class="card">
        <h2>Результат</h2>

        <div class="big" id="netValue">—</div>
        <div class="muted" id="summary">—</div>

        <div class="stats" style="margin-top:14px">
          <div class="stat">
            <div class="k">НДФЛ</div>
            <div class="v" id="taxValue">—</div>
          </div>
          <div class="stat">
            <div class="k">Сумма до налога</div>
            <div class="v" id="grossValue">—</div>
          </div>
          <div class="stat">
            <div class="k">Усреднённая ставка</div>
            <div class="v" id="avgRateValue">—</div>
          </div>
        </div>

        <details class="details" style="margin-top:12px">
          <summary>Детали расчёта</summary>
          <div class="detailbox" id="detailsBox" style="margin-top:10px">—</div>
        </details>

        <div class="hint" style="margin-top:12px">
          Подсказка: если вы вводите «на руки», калькулятор подберёт сумму «до налога» автоматически.
        </div>
      </div>
    </div>
  </div>

  <!-- help modal -->
  <div class="modal" id="helpModal" style="display:none">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle">Справка</div>
          <div class="modalText">Это прототип. Ставки и правила могут зависеть от года и вида дохода. Для точных расчётов используйте официальные источники.</div>
        </div>
        <button class="btn" id="helpClose">Закрыть</button>
      </div>
      <div class="modalText" style="margin-top:10px">
        <ul style="margin:0; padding-left:18px; color:var(--muted); line-height:1.5">
          <li>«Сумма указана как»: выберите «до налога» или «на руки».</li>
          <li>«Вычет»: уменьшает базу. Если вычетов нет, оставьте 0.</li>
          <li>«Своя ставка»: режим для проверки или редких случаев.</li>
        </ul>
      </div>
    </div>
  </div>

  <script src="ndfl.js"></script>
</body>
</html>
